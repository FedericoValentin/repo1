<!DOCTYPE html>
<html>

<head>

</head>

<body>

    <h1>Ajax 18:16</h1>
    <button onclick="descargarArchivo()">Click me</button>


    <script>
        function inicializar_XHR() {
            if (window.XMLHttpRequest) {
                peticionHTTP = new XMLHttpRequest();
            } else {
                peticionHTTP = new ActiveXObject("Microsoft.XMLHTTP");
            }
        }
        function realizarPeticion(url, metodo, funcion) {
            peticionHTTP.onreadystatechange = funcion;
            peticionHTTP.open(metodo, url, true);
            peticionHTTP.send(null);
        }

        function descargarArchivo() {
            inicializar_XHR();
            realizarPeticion("archivo.txt", "GET", funcActuadora);
        }

        function funcActuadora() {
            alert("Actuando");
            if (peticionHTTP.readyState == 4) {
                if (peticionHTTP.status == 200) {
                    var texto = peticionHTTP.responseText;
                    var elemento = createElement("p");
                    elemento.appendChild(texto);
                    document.body.appendChild(elemento);
                }
            }
        }

 //      window.onload = descargarArchivo;

    </script>
</body>

</html>
